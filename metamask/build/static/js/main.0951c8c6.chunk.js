(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{54:function(e,t,n){"use strict";(function(e){n(3),n(7);var a=n(1),s=n(4),c=n(2),r=n(6),i=n(0);t.a=function(t){t.resetReload;var n=t.postData,o=Object(a.useContext)(r.a),l=Object(s.g)();return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:"col-xl-8 col-lg-7",children:Object(i.jsx)("img",{className:"img-fluid mb-3 mb-lg-0",src:function(){var t=new e.from(n.imageData).toString("base64");return"data:"+n.contentType+";base64,"+t}()})}),Object(i.jsx)("div",{className:"col-xl-4 col-lg-5",children:Object(i.jsxs)("div",{className:"featured-text text-center text-lg-left",children:[o.user===n.authorId?Object(i.jsx)("h4",{children:"By: Me"}):Object(i.jsxs)("h4",{children:["By: ",n.authorFullName]}),Object(i.jsx)("p",{className:"text-black-50 mb-0",children:n.content}),Object(i.jsx)("hr",{className:"my-4 mx-auto"}),o.user===n.authorId?Object(i.jsx)(i.Fragment,{}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("a",{className:"btn btn-success",onClick:function(){return l.push("/conversations/"+n.authorId)},children:"SEND MESSAGE"}),Object(i.jsx)("hr",{className:"my-4 mx-auto"})]}),Object(i.jsx)(c.b,{className:"btn btn-success",to:"/feed/".concat(n._id),children:"VIEW"})]})})]})}}).call(this,n(28).Buffer)},55:function(e,t,n){"use strict";(function(e){var a=n(3),s=n.n(a),c=n(7),r=n(5),i=n(4),o=n(2),l=n(1),j=n(6),d=n(0);t.a=function(t){var n=t.posts,a=t.resetReload,b=t.authToken,u=Object(i.h)().postId,h=Object(l.useContext)(j.a),m=Object(i.g)(),x=Object(l.useState)(!1),O=Object(r.a)(x,2),p=(O[0],O[1]),v=Object(l.useState)(!1),f=Object(r.a)(v,2),g=f[0],N=f[1],y=Object(l.useState)(),k=Object(r.a)(y,2),C=k[0],w=k[1],T=Object(l.useState)(null),S=Object(r.a)(T,2),R=S[0],I=S[1],F=n.find((function(e){return e._id===u}));Object(l.useEffect)((function(){var t=new e.from(F.imageData).toString("base64"),n=F.contentType;I("data:"+n+";base64,"+t)}),[]);var D=function(){var e=Object(c.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),p(!0),e.next=4,fetch("/edit-post",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:h.user,authToken:b,post:{postId:u,content:C}})}).then((function(e){return e.json()})).then((function(e){if("User authenticated"===e.message)return e.posts;console.log("User not authenticated")}));case 4:n=e.sent,p(!1),N(!1),a(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(c.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,fetch("/delete-post",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:h.user,authToken:b,postId:F._id})}).then((function(e){return e.json()})).then((function(e){if("User authenticated"===e.message)return e.posts;console.log(e.message)}));case 3:t=e.sent,p(!1),m.push("/feed"),a(t);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",id:"mainNav",children:Object(d.jsxs)("div",{className:"container px-4 px-lg-5",children:[Object(d.jsx)("a",{className:"navbar-brand",href:"#page-top",children:"Creative Share"}),Object(d.jsxs)("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:["Menu",Object(d.jsx)("i",{className:"fas fa-bars"})]}),Object(d.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(d.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{className:"nav-link",to:"/home",children:"Home"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{className:"nav-link",to:"/feed",children:"Feed"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{className:"nav-link",to:"/my-posts",children:"My Posts"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)(o.b,{className:"nav-link",to:"/conversations",children:"Conversations"})}),Object(d.jsx)("li",{className:"nav-item",children:Object(d.jsx)("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){h.signout((function(){return m.push("/")}))},children:"LOGOUT"})})]})})]})}),Object(d.jsx)("section",{className:"projects-section bg-light",id:"projects",children:Object(d.jsxs)("div",{className:"container px-4 px-lg-5",children:[Object(d.jsxs)("h4",{children:["By: ",F.authorFullName]}),Object(d.jsxs)("div",{className:"row gx-0 mb-5 mb-lg-0 justify-content-center",children:[Object(d.jsx)("div",{className:"col-lg-6",children:Object(d.jsx)("img",{className:"img-fluid",src:R,alt:"..."})}),g?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"col-lg-6",children:Object(d.jsx)("div",{className:"bg-black text-center h-100 project",children:Object(d.jsx)("div",{className:"d-flex h-100",children:Object(d.jsx)("div",{className:"project-text w-100 my-auto text-center text-lg-left",children:Object(d.jsxs)("form",{name:"edit-form",onSubmit:function(e){return D(e)},children:[Object(d.jsx)("textarea",{className:"form-control",defaultValue:F.content,onChange:function(e){return w(e.target.value)}}),Object(d.jsx)("button",{className:"btn text-white ",type:"submit",children:"CONFIRM EDIT"})]})})})})}),Object(d.jsx)("a",{className:"btn",onClick:function(){return N(!1)},children:"CANCEL"})]}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"col-lg-6",children:Object(d.jsx)("div",{className:"bg-black text-center h-100 project",children:Object(d.jsx)("div",{className:"d-flex h-100",children:Object(d.jsx)("div",{className:"project-text w-100 my-auto text-center text-lg-left",children:Object(d.jsx)("h5",{className:"text-white",children:F.content})})})})}),h.user===F.authorId?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("a",{className:"btn",onClick:function(){return N(!0)},children:"EDIT"}),Object(d.jsx)("a",{className:"btn btn-danger",onClick:function(){return E()},children:"DELETE"})]}):Object(d.jsx)("a",{className:"btn btn-secondary",onClick:function(){return m.push("/conversations/"+F.authorId)},children:"SEND MESSAGE"})]})]})]})})]})}}).call(this,n(28).Buffer)},6:function(e,t,n){"use strict";var a=n(1),s=Object(a.createContext)();t.a=s},62:function(e,t,n){},63:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(49),r=n.n(c),i=(n(62),n(5)),o=(n(63),n(2)),l=n(4),j=n(3),d=n.n(j),b=n(7),u=n(6),h=n(0),m=function(e){var t=e.resetReload,n=e.authToken,s=Object(l.g)(),c=Object(a.useContext)(u.a),r=Object(a.useState)({content:"",userId:c.user}),j=Object(i.a)(r,2),m=j[0],x=j[1],O=Object(a.useState)(),p=Object(i.a)(O,2),v=p[0],f=p[1],g=Object(a.useState)(!1),N=Object(i.a)(g,2),y=(N[0],N[1]),k=function(){var e=Object(b.a)(d.a.mark((function e(a){var c,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),(c=new FormData).append("content",m.content),c.append("userId",m.userId),c.append("image",v.image),c.append("authToken",n),y(!0),e.next=9,fetch("/new-post-v2",{method:"POST",body:c}).then((function(e){return e.json()})).then((function(e){if("User authenticated"===e.message)return e.posts;console.log(e.message)}));case 9:r=e.sent,s.push("/feed"),t(r);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",id:"mainNav",children:Object(h.jsxs)("div",{className:"container px-4 px-lg-5",children:[Object(h.jsx)("a",{className:"navbar-brand",href:"#page-top",children:"Creative Share"}),Object(h.jsxs)("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:["Menu",Object(h.jsx)("i",{className:"fas fa-bars"})]}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(h.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/home",children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/feed",children:"Feed"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/my-posts",children:"My Posts"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/conversations",children:"Conversations"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){c.signout((function(){return s.push("/")}))},children:"LOGOUT"})})]})})]})}),Object(h.jsx)("section",{className:"projects-section bg-light",id:"projects",children:Object(h.jsx)("div",{className:"container px-4 px-lg-5",children:Object(h.jsxs)("div",{className:"row gx-0 mb-4 mb-lg-5 align-items-center",children:[Object(h.jsxs)("form",{id:"new-post",onSubmit:function(e){return k(e)},children:[Object(h.jsx)("input",{className:"form-control mb-2",type:"file",id:"formFile",name:"image",onChange:function(e){f({image:e.target.files[0]})},required:!0}),Object(h.jsx)("textarea",{className:"form-control mb-2",onChange:function(e){x({content:e.target.value,userId:m.userId})},required:!0})]}),Object(h.jsx)("button",{form:"new-post",type:"submit",className:"btn btn-secondary",children:"POST"}),Object(h.jsx)("button",{onClick:function(){return s.push("/feed")},className:"btn btn-danger",children:"CANCEL"})]})})})]})},x=function(e){var t=e.changeAuthToken,n=Object(a.useState)(""),s=Object(i.a)(n,2),c=s[0],r=s[1],j=Object(a.useState)(""),d=Object(i.a)(j,2),b=d[0],m=d[1],x=Object(a.useState)(!0),O=Object(i.a)(x,2),p=(O[0],O[1]),v=Object(l.g)(),f=Object(a.useContext)(u.a),g={pathname:"/home"},N=function(e){e.preventDefault(),fetch("/attempt-login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:c,password:b})}).then((function(e){if(e.ok)return e.json();throw e})).then((function(e){var n;"User found!"===e.message?(t(e.AuthToken),n=e.user._id,f.signin((function(){v.replace(g)}),n)):"User not found!"===e.message&&p(!1)}))};return Object(h.jsx)("div",{className:"text-center",style:{height:"100%",display:"flex",alignItems:"center",paddingTop:"40px",paddingBottom:"40px"},children:Object(h.jsxs)("main",{style:{width:"100%",maxWidth:"330px",padding:"15px",margin:"auto"},children:[Object(h.jsxs)("form",{onSubmit:function(e){return N(e)},children:[Object(h.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Please sign in"}),Object(h.jsxs)("div",{className:"form-floating",children:[Object(h.jsx)("input",{type:"username",className:"form-control",id:"floatingInput",placeholder:"Username",onChange:function(e){return r(e.target.value)},required:!0}),Object(h.jsx)("label",{children:"Username"})]}),Object(h.jsxs)("div",{className:"form-floating",children:[Object(h.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",onChange:function(e){return m(e.target.value)},required:!0}),Object(h.jsx)("label",{children:"Password"})]}),Object(h.jsx)("button",{className:"w-100 btn btn-lg btn-primary",type:"submit",children:"Sign in"})]}),Object(h.jsxs)("h5",{children:["Don't have an account? Register ",Object(h.jsx)(o.b,{to:"register",children:"Here"})]})]})})},O=function(e){var t=e.resetReload,n=Object(l.g)(),s=Object(a.useState)({firstname:"",lastname:"",username:"",password:""}),c=Object(i.a)(s,2),r=c[0],j=c[1],u=function(){var e=Object(b.a)(d.a.mark((function e(a){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/new-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then((function(e){return e.json()})).then((function(e){if("User authenticated"===e.message)return e.posts;throw e.message}));case 3:s=e.sent,n.push("/login"),t(s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"text-center",style:{height:"100%",display:"flex",alignItems:"center",paddingTop:"40px",paddingBottom:"40px"},children:Object(h.jsxs)("main",{style:{width:"100%",maxWidth:"330px",padding:"15px",margin:"auto"},children:[Object(h.jsxs)("form",{onSubmit:function(e){return u(e)},children:[Object(h.jsx)("h1",{className:"h3 mb-3 fw-normal",children:"Register here"}),Object(h.jsxs)("div",{className:"form-floating",children:[Object(h.jsx)("input",{className:"form-control",placeholder:"Firstname",onChange:function(e){return j({firstname:e.target.value,lastname:r.lastname,username:r.username,password:r.password})},required:!0}),Object(h.jsx)("label",{children:"Firstname"})]}),Object(h.jsxs)("div",{className:"form-floating",children:[Object(h.jsx)("input",{className:"form-control",placeholder:"Lastname",onChange:function(e){return j({firstname:r.firstname,lastname:e.target.value,username:r.username,password:r.password})},required:!0}),Object(h.jsx)("label",{children:"Lastname"})]}),Object(h.jsxs)("div",{className:"form-floating",children:[Object(h.jsx)("input",{className:"form-control",placeholder:"Username",onChange:function(e){return j({firstname:r.firstname,lastname:r.lastname,username:e.target.value,password:r.password})},required:!0}),Object(h.jsx)("label",{children:"Username"})]}),Object(h.jsxs)("div",{className:"form-floating",children:[Object(h.jsx)("input",{type:"password",className:"form-control",placeholder:"Password",onChange:function(e){return j({firstname:r.firstname,lastname:r.lastname,username:r.username,password:e.target.value})},required:!0}),Object(h.jsx)("label",{children:"Password"})]}),Object(h.jsx)("button",{className:"w-100 btn btn-lg btn-primary",type:"submit",children:"Register"})]}),Object(h.jsxs)("h5",{children:["Already have an account? Login ",Object(h.jsx)(o.b,{to:"login",children:"Here"})]})]})})},p=function(e){var t=e.resetReload,n=e.authToken,s=Object(a.useContext)(u.a),c=Object(l.g)(),r=Object(l.i)(),i=r.path;r.url;return Object(a.useEffect)((function(){(function(){var e=Object(b.a)(d.a.mark((function e(){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authToken:n,userId:s.user})}).then((function(e){return e.json()})).then((function(e){return e}));case 2:"User authenticated"===(a=e.sent).message&&t(a.posts);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(h.jsx)(l.d,{children:Object(h.jsxs)(l.b,{exact:!0,path:i,children:[Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",id:"mainNav",children:Object(h.jsxs)("div",{className:"container px-4 px-lg-5",children:[Object(h.jsx)("a",{className:"navbar-brand",href:"#page-top",children:"Creative Share"}),Object(h.jsxs)("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:["Menu",Object(h.jsx)("i",{className:"fas fa-bars"})]}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(h.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/home",children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/feed",children:"Feed"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/my-posts",children:"My Posts"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/conversations",children:"Conversations"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){s.signout((function(){return c.push("/")}))},children:"LOGOUT"})})]})})]})}),Object(h.jsx)("header",{className:"masthead",children:Object(h.jsx)("div",{className:"container px-4 px-lg-5 d-flex h-100 align-items-center justify-content-center",children:Object(h.jsx)("div",{className:"d-flex justify-content-center",children:Object(h.jsxs)("div",{className:"text-center",children:[Object(h.jsx)("h1",{className:"mx-auto my-0 text-uppercase",children:"Share Creativity"}),Object(h.jsx)("h2",{className:"text-white-50 mx-auto mt-2 mb-5",children:"Share photographs with others. Navigate to Feed to see all the posts and post something creative of your own!"}),Object(h.jsx)(o.b,{className:"btn btn-primary",to:"/feed",children:"To Feed"})]})})})})]})})},v=n(51),f=Object(v.io)("http://localhost:5000",{transports:["websocket"],autoConnect:!1}),g=n(52),N=n(53),y=n(57),k=n(56),C=function(e){Object(y.a)(n,e);var t=Object(k.a)(n);function n(e){var a;return Object(g.a)(this,n),(a=t.call(this,e)).myRef=s.a.createRef(),a}return Object(N.a)(n,[{key:"componentDidUpdate",value:function(){this.myRef.current.scrollTop=this.myRef.current.scrollHeight}},{key:"render",value:function(){return Object(h.jsx)("div",{ref:this.myRef,style:{height:"320px",display:"block",overflow:"auto"},children:this.props.allMessages.map((function(e){return"Me"===e.messageAuthorFirstName?Object(h.jsxs)("h5",{style:{textAlign:"right"},children:[e.messageContent," :",e.messageAuthorFirstName]},e._id):Object(h.jsxs)("h5",{style:{textAlign:"left"},children:[e.messageAuthorFirstName,": ",e.messageContent]},e._id)}))})}}]),n}(s.a.Component),w=function(e){var t=e.resetReload,n=e.otherConnected,s=e.changeOtherConnected,c=e.userData,r=e.authToken,j=Object(a.useState)(),m=Object(i.a)(j,2),x=m[0],O=m[1],p=Object(a.useState)(!0),v=Object(i.a)(p,2),g=v[0],N=v[1],y=Object(a.useContext)(u.a),k=Object(l.g)(),w=Object(l.h)().otherUserId,T=function(){var e=Object(b.a)(d.a.mark((function e(){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authToken:r,userId:y.user})}).then((function(e){return e.json()})).then((function(e){if("User authenticated"===e.message)return e.posts;console.log("Data refetch failed!")}));case 2:return n=e.sent,console.log("data reloaded"),e.next=6,t(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=c.find((function(e){return e._id===y.user})),R=c.find((function(e){return e._id===w})),I=function(){var e=!1,t=!1;return S.conversations.forEach((function(t){t.userId===w&&(e=!0)})),R.conversations.forEach((function(e){e.userId===y.user&&(t=!0)})),e&&t}(),F=[],D=[];I&&(F=S.conversations.find((function(e){return e.userId===w})).messages.map((function(e){return{messageContent:e.messageContent,messageCreatedAt:e.messageCreatedAt,messageAuthorFirstName:"Me",_id:e._id}})),D=R.conversations.find((function(e){return e.userId===y.user})).messages.map((function(e){var t=c.find((function(e){return e._id===w})).firstName;return{messageContent:e.messageContent,messageCreatedAt:e.messageCreatedAt,messageAuthorFirstName:t,_id:e._id}})));var E=F.concat(D).sort((function(e,t){var n=new Date(t.messageCreatedAt);return new Date(e.messageCreatedAt)-n}));Object(a.useEffect)((function(){N(!I)}),[I]),Object(a.useEffect)((function(){f.auth={connectedUser:y.user},f.connect();var e=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t===w&&T();case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=function(e){e.forEach((function(e){e.username===w&&s({connected:!0,socketId:e.userId})}))};return f.on("new message",e),f.on("users",t),function(){f.off("new message",e),f.off("users",t),f.disconnect()}}),[]);var U=function(){var e=Object(b.a)(d.a.mark((function e(n){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,fetch("/new-conversation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:y.user,authToken:r,otherUserId:w,firstMessage:x})}).then((function(e){return e.json()})).then((function(e){if("User authenticated"===e.message)return console.log(e.message),e.posts;console.log(e.message)}));case 3:a=e.sent,t(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(b.a)(d.a.mark((function e(a){var s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,fetch("/send-message",{method:"PUT",headers:{"Content-Type":"Application/json"},body:JSON.stringify({userId:y.user,authToken:r,otherUserId:w,message:x})}).then((function(e){return e.json()})).then((function(e){if("User authenticated"===e.message)return e.posts;console.log(e.message)}));case 3:s=e.sent,n.connected&&f.emit("new message",{otherSocketId:n.socketId}),t(s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",id:"mainNav",children:Object(h.jsxs)("div",{className:"container px-4 px-lg-5",children:[Object(h.jsx)("a",{className:"navbar-brand",href:"#page-top",children:"Creative Share"}),Object(h.jsxs)("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:["Menu",Object(h.jsx)("i",{className:"fas fa-bars"})]}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(h.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/home",children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/feed",children:"Feed"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/my-posts",children:"My Posts"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/conversations",children:"Conversations"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",onClick:function(){y.signout((function(){return k.push("/")}))},children:"LOGOUT"})})]})})]})}),Object(h.jsx)("section",{className:"projects-section bg-light",children:Object(h.jsxs)("div",{className:"container",style:{paddingLeft:"30%",paddingRight:"30%"},children:[Object(h.jsx)(C,{allMessages:E}),Object(h.jsx)("form",{onSubmit:g?function(e){return U(e)}:function(e){return P(e)},children:Object(h.jsxs)("div",{className:"input-group",children:[Object(h.jsx)("input",{type:"text",className:"form-control",placeholder:"Message",onChange:function(e){return O(e.target.value)}}),Object(h.jsx)("button",{className:"btn btn-outline-secondary",type:"submit",id:"button-addon2",children:"SEND"})]})})]})})]})},T=function(e){var t=e.userData,n=e.resetReload,s=e.otherConnected,c=e.changeOtherConnected,r=e.authToken,i=Object(l.g)(),j=Object(l.i)(),d=j.path,b=(j.url,Object(a.useContext)(u.a)),m=t.find((function(e){return e._id===b.user})).conversations,x=function(e){var n=t.find((function(t){return t._id===e}));return"".concat(n.firstName," ").concat(n.lastName)};return Object(h.jsxs)(l.d,{children:[Object(h.jsxs)(l.b,{exact:!0,path:d,children:[Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",id:"mainNav",children:Object(h.jsxs)("div",{className:"container px-4 px-lg-5",children:[Object(h.jsx)("a",{className:"navbar-brand",href:"#page-top",children:"Creative Share"}),Object(h.jsxs)("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:["Menu",Object(h.jsx)("i",{className:"fas fa-bars"})]}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(h.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/home",children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/feed",children:"Feed"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/my-posts",children:"My Posts"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/conversations",children:"Conversations"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){b.signout((function(){return i.push("/")}))},children:"LOGOUT"})})]})})]})}),Object(h.jsx)("section",{className:"contact-section bg-black",children:Object(h.jsx)("div",{className:"container px-4 px-lg-5",children:Object(h.jsxs)("div",{className:"row gx-4 gx-lg-5 pb-3",children:[0===m.length?Object(h.jsx)("div",{className:"col-md-4 mb-3 mb-md-0 mt-4",children:Object(h.jsx)("h3",{className:"text-white",children:"You have no conversations"})}):Object(h.jsx)(h.Fragment,{}),m.map((function(e,t){return Object(h.jsx)("div",{className:"col-md-4 mb-3 mb-md-0 mt-4",children:Object(h.jsx)("div",{className:"card py-4 h-100",style:{background:"#f0f0f0"},children:Object(h.jsxs)("div",{className:"card-body text-center",children:[Object(h.jsx)("h3",{children:x(e.userId)}),Object(h.jsx)("hr",{className:"my-4 mx-auto"}),Object(h.jsx)(o.b,{className:"btn bg-white",to:"/conversations/".concat(e.userId),children:"Enter Conversation"})]})})},t)}))]})})})]}),Object(h.jsx)(l.b,{path:"".concat(d,"/:otherUserId"),children:Object(h.jsx)(w,{authToken:r,userData:t,resetReload:n,otherConnected:s,changeOtherConnected:c})})]})},S=n(54),R=function(e){var t=e.posts,n=e.resetReload,a=e.refetchData;return Object(h.jsxs)("div",{className:"row gx-0 mb-4 mb-lg-5 align-items-center",style:{background:"#d4e3fa"},children:[Object(h.jsx)("button",{className:"btn btn-primary",onClick:function(){return a()},children:"REFRESH"}),Object(h.jsx)(o.b,{className:"btn btn-secondary",to:"new-post",children:"NEW POST"}),t.map((function(e,t){return Object(h.jsx)(S.a,{postData:e,resetReload:n},t)}))]})},I=n(55),F=function(e){var t=e.posts,n=e.resetReload,s=e.loading,c=e.authToken,r=Object(l.g)(),i=Object(a.useContext)(u.a),j=Object(l.i)(),m=j.path,x=(j.url,function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({authToken:c,userId:i.user})}).then((function(e){return e.json()})).then((function(e){if("User authenticated"===e.message)return e.posts;console.log("Refetch data failed")}));case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}());return Object(h.jsxs)(l.d,{children:[Object(h.jsxs)(l.b,{exact:!0,path:m,children:[Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",id:"mainNav",children:Object(h.jsxs)("div",{className:"container px-4 px-lg-5",children:[Object(h.jsx)("a",{className:"navbar-brand",href:"#page-top",children:"Creative Share"}),Object(h.jsxs)("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:["Menu",Object(h.jsx)("i",{className:"fas fa-bars"})]}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(h.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/home",children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/feed",children:"Feed"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/my-posts",children:"My Posts"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/conversations",children:"Conversations"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){i.signout((function(){return r.push("/")}))},children:"LOGOUT"})})]})})]})}),Object(h.jsx)("section",{className:"projects-section bg-light",id:"projects",children:Object(h.jsxs)("div",{className:"container px-4 px-lg-5",children:[s&&Object(h.jsx)("h4",{children:"Loading..."}),Object(h.jsx)(R,{posts:t,resetReload:n,refetchData:x})]})})]}),Object(h.jsx)(l.b,{path:"".concat(m,"/:postId"),children:Object(h.jsx)(I.a,{posts:t,resetReload:n,authToken:c})})]})},D=function(e){var t=e.posts,n=Object(a.useContext)(u.a),s=Object(l.g)(),c=t.filter((function(e){return e.authorId===n.user}));return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light fixed-top",id:"mainNav",children:Object(h.jsxs)("div",{className:"container px-4 px-lg-5",children:[Object(h.jsx)("a",{className:"navbar-brand",href:"#page-top",children:"Creative Share"}),Object(h.jsxs)("button",{className:"navbar-toggler navbar-toggler-right",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarResponsive","aria-controls":"navbarResponsive","aria-expanded":"false","aria-label":"Toggle navigation",children:["Menu",Object(h.jsx)("i",{className:"fas fa-bars"})]}),Object(h.jsx)("div",{className:"collapse navbar-collapse",id:"navbarResponsive",children:Object(h.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/home",children:"Home"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/feed",children:"Feed"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/my-posts",children:"My Posts"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)(o.b,{className:"nav-link",to:"/conversations",children:"Conversations"})}),Object(h.jsx)("li",{className:"nav-item",children:Object(h.jsx)("a",{className:"nav-link",style:{cursor:"pointer"},onClick:function(){n.signout((function(){return s.push("/")}))},children:"LOGOUT"})})]})})]})}),Object(h.jsx)("section",{className:"contact-section bg-black",children:Object(h.jsx)("div",{className:"container px-4 px-lg-5",children:Object(h.jsxs)("div",{className:"row gx-4 gx-lg-5 pb-3",children:[0===c.length?Object(h.jsx)("div",{className:"col-md-4 mb-3 mb-md-0 mt-4",children:Object(h.jsx)("h3",{className:"text-white",children:"You have no posts"})}):Object(h.jsx)(h.Fragment,{}),c.map((function(e,t){return Object(h.jsx)("div",{className:"col-md-4 mb-3 mb-md-0 mt-4",children:Object(h.jsx)("div",{className:"card py-4 h-100",style:{background:"#f0f0f0"},children:Object(h.jsxs)("div",{className:"card-body text-center",children:[Object(h.jsx)("h3",{children:e.content}),Object(h.jsx)("hr",{className:"my-4 mx-auto"}),Object(h.jsx)(o.b,{className:"btn btn-success",to:"/feed/".concat(e._id),children:"VIEW"})]})})},t)}))]})})})]})};var E=function(){var e=Object(a.useState)({posts:null,userData:null}),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),r=Object(i.a)(c,2),j=r[0],d=(r[1],Object(a.useState)({connected:!1,socketId:""})),b=Object(i.a)(d,2),v=b[0],f=b[1],g=Object(a.useState)(""),N=Object(i.a)(g,2),y=N[0],k=N[1],C=function(e){var t=function(e){var t=[];return e.forEach((function(e){var n=e.firstName+" "+e.lastName,a=e._id;t=t.concat(e.tweets.map((function(e){return{content:e.content,_id:e._id,authorFullName:n,authorId:a,createdAt:new Date(e.createdAt),imageData:e.imageData,contentType:e.contentType}})))})),t.sort((function(e,t){return t.createdAt-e.createdAt})),t}(e);s({posts:t,userData:e})};return Object(h.jsx)("div",{children:Object(h.jsx)(u.a.Provider,{value:U(),children:Object(h.jsx)(o.a,{children:Object(h.jsxs)(l.d,{children:[Object(h.jsx)(P,{path:"/new-post",children:Object(h.jsx)(m,{resetReload:C,authToken:y})}),Object(h.jsx)(l.b,{path:"/login",children:Object(h.jsx)(x,{changeAuthToken:function(e){k(e)}})}),Object(h.jsx)(l.b,{path:"/register",children:Object(h.jsx)(O,{resetReload:C})}),Object(h.jsx)(P,{path:"/home",children:Object(h.jsx)(p,{authToken:y,posts:n.posts,resetReload:C,loading:j})}),Object(h.jsx)(P,{path:"/feed",children:Object(h.jsx)(F,{posts:n.posts,resetReload:C,authToken:y})}),Object(h.jsx)(P,{path:"/conversations",children:Object(h.jsx)(T,{authToken:y,userData:n.userData,resetReload:C,otherConnected:v,changeOtherConnected:function(e){f(e)}})}),Object(h.jsx)(P,{path:"/my-posts",children:Object(h.jsx)(D,{posts:n.posts})}),Object(h.jsx)(P,{path:"/",children:Object(h.jsx)(l.a,{to:"/home"})})]})})})})},U=function(){var e=Object(a.useState)(null),t=Object(i.a)(e,2),n=t[0],s=t[1];return{user:n,signin:function(e,t){s(t),e()},signout:function(e){s(null),e()}}},P=function(e){var t=e.path,n=e.children,s=Object(a.useContext)(u.a);return Object(h.jsx)(l.b,{path:t,render:function(e){var t=e.location;return s.user?n:Object(h.jsx)(l.a,{to:{pathname:"/login",state:{from:t}}})}})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,100)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(E,{})}),document.getElementById("root")),A()}},[[99,1,2]]]);
//# sourceMappingURL=main.0951c8c6.chunk.js.map